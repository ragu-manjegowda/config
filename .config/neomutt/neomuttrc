# General settings =========================={{{

# Folder hooks
folder-hook 'email1.outlook' 'source $XDG_CONFIG_HOME/neomutt/email1.outlook'
set rfc2047_parameters = yes

# Default account
source $XDG_CONFIG_HOME/neomutt/email1.outlook

# Delete without confirming
set delete

unset confirmappend

# Check for new emails
set timeout             = 5   # press artificially a key after 10 seconds
set mail_check          = 10 # How often to check for new mail (time in seconds) but not more often then once in 300 seconds
set beep
set beep_new                  # beep on new messages in the mailboxes

#If this variable is set, Mutt will require that all connections to remote servers be encrypted
set ssl_force_tls=yes

set imap_keepalive = 900

# Don't ask to confirm the recipient and the subject when reply to an e-mail
set fast_reply=yes
set include=yes

# always show X number of mails in the index
set pager_index_lines = 10

# Make mutt faster
set sleep_time = 0

set ts_enabled = yes

# A customizable header
set edit_headers = yes
set editor = 'nvim +/^$ +nohlsearch' # Move past headers

# Pager options
set smart_wrap

# Don't insert '+' character for wrapped lines
unset markers

# Do not mark unread mail as old
set mark_old=no

# Pad blank lines in pager with ~ (ala vi)
set tilde
set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"

# set sort = 'reverse-date'		# sorting the mails in threads in index (mails-list-view)
set sort = 'threads'
set sort_aux = reverse-last-date-received		# and the thread themselves reverse-date
# set sort=reverse-threads
# set sort_aux=date-received
set narrow_tree=no
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"

set mime_forward = yes

#### Settings from https://github.com/ceuk/mutt_dotfiles/blob/master/.config/mutt/muttrc
set pager_read_delay = 3      # View a message for 3 seconds to mark as read
set mark_old = no		          # Unread mail stay unread until read
set mime_forward = no	  	    # attachments are forwarded with mail
set include			              # include message in replies
set smart_wrap             # wrap lines at word boundaries rather than splitting up words
set wrap = 90                # email view width
set text_flowed = yes
set tmpdir = "$HOME/.cache/neomutt"

set quit = ask-yes

# }}}

# HTML Rendering ============================{{{

set mailcap_path = "$XDG_CONFIG_HOME/neomutt/mailcap"

auto_view text/calendar
auto_view application/ics
auto_view text/html       # view html automatically
alternative_order text/calendar application/ics text/plain text/enriched text/html     # list html for last

# }}}


# Keybidings ================================{{{

source $XDG_CONFIG_HOME/neomutt/bindings.mutt

#}}}


# Bars ======================================{{{

source "$XDG_CONFIG_HOME/neomutt/styles.muttrc"

#}}}


# Sidebar ==================================={{{

# Sidebar for Mutt
#set sidebar_visible = yes
#set sidebar_width = 25
## Color to give mailboxes containing flagged mail
#color sidebar_flagged red default
## Color to give mailboxes containing new mail
#color sidebar_new yellow default

# Sidebar for neomutt
set sidebar_visible = yes
set sidebar_width = 25
set sidebar_short_path = yes
set sidebar_next_new_wrap = yes
set mail_check_stats
set sidebar_component_depth = 5

#}}}


# Colors ===================================={{{

source "$XDG_CONFIG_HOME/neomutt/dracula.muttrc"

#}}}


# Aliases ==========================={{{

set display_filter = $XDG_CONFIG_HOME/neomutt/create-alias.sh # auto create aliases
set alias_file     = $XDG_CONFIG_HOME/neomutt/aliases
set sort_alias     = alias
set reverse_alias  = yes
source "cat $alias_file 2> /dev/null |" # only source if file exists

# }}}



##############
#  Contacts  #
##############

# # Automatically add email addresses to abook, whenever email is opened
# set display_filter = "pee 'abook --add-email-quiet' 'cat -'"
# # When looking for contacts, use this command
# set query_command= "abook --mutt-query '%s'"
# # Add current sender to address book
# macro index,pager  a "<pipe-message>abook --add-email-quiet<return>" "Add this sender to Abook"
# # Auto-complete email addresses by pushing tab
# bind editor <Tab> complete-query

