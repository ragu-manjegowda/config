#!/usr/bin/env bash

# Extended display with scaled external monitor to match laptop height
# This makes cursor movement smooth across displays

# Set DPI based on primary display
xrandr --dpi 192

# Set laptop display (primary)
xrandr --output eDP-1 --primary --mode 3840x2400 --pos 0x0

# Check if DP-3 is connected
if xrandr | grep -q "^DP-4 connected"; then
    # Scale external monitor to match laptop dimensions using --scale-from
    # This automatically calculates the scale factor:
    #   Width: 3840/3440 = 1.116x
    #   Height: 2400/1440 = 1.667x
    # No manual calculation needed!

    xrandr --output DP-4 --mode 3440x1440 --scale-from 3840x2400 --pos 3840x0

    echo "âœ“ Extended display with scaling:"
    echo "  - Laptop (eDP-1): 3840x2400 @ 0x0 (native)"
    echo "  - External (DP-4): 3440x1440 scaled from 3840x2400"
    echo "  - Total desktop: 7280x2400 pixels (both displays same effective size)"
    echo "  - Heights aligned perfectly for smooth cursor movement"
    echo ""
    echo "Note: External display will be slightly less sharp due to scaling"
else
    echo "DP-4 not connected, using laptop display only"
fi

